<div class="dashboard">
  <h1>Dashboard</h1>

  <!-- Summary Cards -->
  <div class="summary-cards">
    <div class="card">
      <div class="card-value">{{ summary()?.totalApplications || 0 }}</div>
      <div class="card-label">Applications</div>
    </div>
    <div class="card">
      <div class="card-value">{{ summary()?.logsLast24Hours || 0 }}</div>
      <div class="card-label">Logs (24h)</div>
    </div>
    <div class="card card-warning">
      <div class="card-value">{{ summary()?.warningsLast24Hours || 0 }}</div>
      <div class="card-label">Warnings (24h)</div>
    </div>
    <div class="card card-error">
      <div class="card-value">{{ summary()?.errorsLast24Hours || 0 }}</div>
      <div class="card-label">Errors (24h)</div>
    </div>
  </div>

  <!-- Charts -->
  <div class="charts-row">
    <div class="chart-container">
      <h3>Logs by Level</h3>
      @if (barChartData()) {
        <canvas baseChart
          [type]="'bar'"
          [data]="barChartData()!"
          [options]="barChartOptions">
        </canvas>
      }
    </div>

    <div class="chart-container">
      <h3>Logs by Application</h3>
      @if (pieChartData()) {
        <canvas baseChart
          [type]="'pie'"
          [data]="pieChartData()!"
          [options]="pieChartOptions">
        </canvas>
      }
    </div>
  </div>

  <div class="chart-container full-width">
    <h3>Logs Over Time</h3>
    @if (lineChartData()) {
      <canvas baseChart
        [type]="'line'"
        [data]="lineChartData()!"
        [options]="lineChartOptions">
      </canvas>
    }
  </div>

  <!-- Real-time Logs -->
  <div class="realtime-logs">
    <h3>
      Real-time Logs
      <span class="connection-status" [class.connected]="signalRService.connectionState() === 'Connected'">
        {{ signalRService.connectionState() === 'Connected' ? 'Connected' : 'Disconnected' }}
      </span>
    </h3>
    <div class="log-list">
      @for (log of signalRService.recentLogs().slice(0, 10); track log.id) {
        <div class="log-item" [class]="'level-' + log.level">
          <span class="log-level">{{ getLogLevelName(log.level) }}</span>
          <span class="log-message">{{ log.message }}</span>
          <span class="log-time">{{ log.timestamp | date:'HH:mm:ss' }}</span>
        </div>
      }
      @if (signalRService.recentLogs().length === 0) {
        <div class="no-logs">Waiting for logs...</div>
      }
    </div>
  </div>
</div>
